from scipy.spatial import distance

articles = [
    {
        'id': 1,
        'word2vec_vector': [ 0.22687541,  0.14207963,  0.04068134, -0.1960955,   0.08015795,  0.14385143,
         -0.46472762, -0.07975457, -0.27986677, -0.35660814,  0.04075904, -0.31710287,
         -0.35912295, -0.01576023,  0.14928315,  0.10652329,  0.0416041,  -0.08716148,
         -0.52387694,  0.01466572,  0.28573009, -0.07747771,  0.03651196, -0.08177578,
         -0.19050083, -1.32774361, -0.11496927,  0.1369291,   0.00910556, -0.07364546,
          2.83385254, -0.22015066, -0.11836334, -0.33067918, -0.08596471,  0.03430548,
          0.20401384,  0.13020622, -0.06854444,  0.05951666, -0.15154164, -0.05515559,
          0.15285274, -0.24563734, -0.12448038,  0.10502858, -0.24720076, -0.29486655,
         -0.12967974, -0.36756519]
    },
    {
        'id': 2,
        'word2vec_vector': [ 0.12337541,  0.12313207963,  0.04068134, -0.1960955,   0.08015795,  0.14385143,
         -0.46472762, -0.07975457, -0.27986677, -0.870814,  0.04075904, -0.31710287,
         -0.35912295, -0.01576023,  0.14928315,  0.10652329,  0.0416041,  -0.08716148,
         -0.512394,  0.01466572,  0.28573009, -0.07747771,  0.03651196, -0.08177578,
         -0.19050083, -1.392774361, -0.896927,  0.23459291,   0.00910556, -0.9864546,
          2.83385254, -0.22015066, -0.11836334, -0.33067918, -0.08596471,  0.78430548,
          0.20401384,  0.13020622, -0.06854444,  0.05951666, -0.15154164, -0.895559,
          0.8785274, -0.24563734, -0.12448038,  0.98502858, -0.9876, -0.29486655,
         -0.98967974, -0.36756519]
    },
    {
        'id': 3,
        'word2vec_vector': [ 0.12337541,  0.12313207963,  0.4068134, -0.1960955,   0.2015795,  0.85143,
         -0.46472762, -0.07975457, -0.27986677, -0.870814,  0.04075904, -0.31710287,
         -0.35912295, -0.01576023,  0.14928315,  0.10652329,  0.0416041,  -0.08716148,
         -0.512394,  0.01466572,  0.28573009, -0.07747771,  0.03651196, -0.08177578,
         -0.19050083, -1.392774361, -0.896927,  0.23459291,   0.00910556, -0.9864546,
          1.83385254, -0.22015066, -0.9836334, -0.33067918, -0.08596471,  0.78430548,
          0.20401384,  0.13020622, -0.06854444,  0.05951666, -0.15154164, -0.895559,
          0.8785274, -0.24563734, -0.12448038,  1.98502858, -0.9876, -0.29486655,
         -0.98967974, -0.36756519]
    }
]

SIMILARITY = 'similarity'

def calculate_cosine_similarity_for_article(article, compare_vector):
    cosine_distance = distance.cosine(compare_vector, article['word2vec_vector'])
    result = {
        'id': article['id'],
        SIMILARITY: 1 - cosine_distance
    }

    return result

def determine_similar_items_with_cosine_similarity(compare_vector):
    unsorted_list_of_articles_with_similarity = [calculate_cosine_similarity_for_article(article, compare_vector) for article in articles]
    result = sorted(unsorted_list_of_articles_with_similarity, key=lambda key: key[SIMILARITY], reverse=True)

    return result
