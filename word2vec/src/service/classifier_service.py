from .model_provider import provide_glove_model
from .similarity_service import determine_similar_items_with_cosine_similarity
from .word_embedding_service import calculate_mean_vector_of_word_embeddings_for_array
from .word_embedding_service import calculate_mean_vector_of_word_embeddings_for_text

articles = [
    # berlin wall
    {
        'id': 1,
        'word2vec_vector': [ 0.22687541,  0.14207963,  0.04068134, -0.1960955,   0.08015795,  0.14385143,
         -0.46472762, -0.07975457, -0.27986677, -0.35660814,  0.04075904, -0.31710287,
         -0.35912295, -0.01576023,  0.14928315,  0.10652329,  0.0416041,  -0.08716148,
         -0.52387694,  0.01466572,  0.28573009, -0.07747771,  0.03651196, -0.08177578,
         -0.19050083, -1.32774361, -0.11496927,  0.1369291,   0.00910556, -0.07364546,
          2.83385254, -0.22015066, -0.11836334, -0.33067918, -0.08596471,  0.03430548,
          0.20401384,  0.13020622, -0.06854444,  0.05951666, -0.15154164, -0.05515559,
          0.15285274, -0.24563734, -0.12448038,  0.10502858, -0.24720076, -0.29486655,
         -0.12967974, -0.36756519]
    },
    # https://en.wikipedia.org/wiki/Deutsches_Theater_(Berlin)
    {
        'id': 2,
        'word2vec_vector': [0.2888457023809526, 0.22504314523809527, -0.35424421071428525, -0.19680051984126992, 0.1783447793650794, 0.184883996031746, -0.33084068650793674, -0.17641024166666674, -0.3337450188095237, -0.06806774960317458, 0.14912468095238093, -0.07470144206349208, -0.3451378031746029, -0.052738626984126985, 0.07922967142857143, -0.06945677579365077, 0.06825473769841273, 0.18230007380952384, -0.5837036976190482, -0.052440547619047664, 0.3908685119047613, -0.03337611825396816, -0.17859427658730145, -0.04856572579365084, -0.09891809166666668, -1.225607061904761, -0.520261167063492, -0.11228920753968256, -0.23382699559523806, -0.03335092222222219, 2.6547731298412702, -0.15518768849206357, -0.012315180952380947, -0.38804593531746057, -0.0007764045634920398, -0.004328688888888884, 0.12682006865079337, 0.32742394960317467, 1.8799603174632935e-05, 0.03200584801587303, 0.004123744444444458, -0.008861773412698412, -0.05971598769841273, -0.18530366626984138, -0.20929183126984127, 0.16105273571428563, -0.15154968809523806, -0.3454345634920634, -0.24859997857142827, -0.10142185357142869]
    },
    {
        'id': 3,
        'word2vec_vector': [0.2437173333333333, 0.23049571212121212, -0.3703368939393938, -0.2697349393939392, 0.04351721212121211, 0.19091334848484845, -0.4495003954545456, -0.003025383333333332, -0.4395431572727274, -0.15188371212121207, 0.21463315151515167, -0.07211292424242424, -0.45102480454545474, 0.05561784848484848, 0.2298050743939394, -0.06791616969696966, -0.14158113181818185, 0.20076819696969703, -0.6616787692424241, 0.20916385, 0.538398643939394, 0.11709590909090908, -0.15684344393939398, 0.07095156060606062, -0.011096630303030292, -1.2572193015151514, -0.5013577727272726, -0.12636231818181823, -0.2787789257575758, -0.015918060606060592, 2.4210754090909097, -0.1937653606060607, -0.05517137727272725, -0.15525196818181825, -0.12551703363636363, -0.21382609545454542, 0.20688544545454546, 0.22075562121212122, 0.1618212621212121, 0.03131363636363634, 0.081093303030303, -0.058439578787878796, -0.01985489393939394, -0.409747706060606, -0.2650421818181818, 0.18899007575757576, -0.14235426666666673, -0.32595596969696966, -0.2774149848484848, 0.06598068484848484]
    }
]

model = provide_glove_model()

def classify(userinput):
    userInputMeanWordEmbeddings = calculate_mean_vector_of_word_embeddings_for_array(userinput, model)
    cosineSimilarities = determine_similar_items_with_cosine_similarity(userInputMeanWordEmbeddings, articles)

    return cosineSimilarities
